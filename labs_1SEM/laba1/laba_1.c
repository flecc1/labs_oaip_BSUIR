#include <stdio.h>
#include <curses.h>
#include <limits.h>
#include <stdlib.h>
#include <time.h>

int main ()
{
    int choice = 0;
    do
    {
    
        int arr[10]; // создание массива из 10 элементов
        int arr2[10];

        printf("\033[1;32mэта программа разворачивает массив\n");

        // Цикл для проверки ввода способа заполнения массива
        while (1)
        {
            printf("\033[1;32mВыберите способ заполнения массива:\n");
            printf("\033[1;32m1. Ввести элементы вручную\n");
            printf("\033[1;32m2. Заполнить массив случайными числами\n");
            printf("\033[1;32mВаш выбор: ");
            
            if (scanf("%d", &choice) != 1)
            { // проверка корректности ввода
                printf("\033[1;31mТакой символ не подходит, введите число 1 или 2.\n");
                rewind(stdin);
                continue;
            }

            // Проверка на правильность выбора (1 или 2)
            if (choice == 1 || choice == 2)
            {
                break;
            }
            else
            {
                printf("\033[1;31mНеверный выбор! Пожалуйста, введите 1 или 2.\n");
            }
        }

        // Заполнение массива в зависимости от выбора пользователя
        if(choice == 1)
        {
            printf("\033[1;32mВведите элементы массива\n");
            for (int i = 0; i < 10; i++) // цикл для запроса у пользователя ввода 10 чисел
            {
                while(1)                    // бесконечный цикл для проверки на ввод элемента массива
                {
                    printf("\033[1;32mэлемент масива %d: ", i + 1);       //вывод элемент масвиа i-го номера
                    rewind(stdin);                              // очистка буфера           
                    if(scanf("%d", &arr[i])!= 1)                            // условие проверки
                    {
                        printf("\033[1;31mданный символ не подходит введите цифру\n");    // вывод сообщения "данный символ не подходит введите цифру"
                    }
                    else if(arr[i] < 0 || arr[i] > INT32_MAX) // проверка что число в нужном диапозоне
                    {
                        printf("\033[1;31mчисло должно быть положительным и до %d\n", INT32_MAX); // вывод сообщения "число должно быть положительным и до 10000"
                    }
                    else
                    break;
                }
            }
        }
        else if(choice == 2)
        {
            // Инициализация генератора случайных чисел
            srand(time(NULL));
            printf("\033[1;32mМассив будет заполнен случайными числами.\n");
            for (int i = 0; i < 10; i++)
            {
                arr[i] = rand() % 2001 - 1000; // случайные числа в диапазоне от -1000 до 1000
            }
        }

        // Вывод массива
        printf("\033[1;32mВведенный/генерированный массив\n");
        for (int i = 0; i < 10; i++)
        {
            printf("%5d ", arr[i]);
        }
        printf("\n\n");

        // Разворот массива
        for (int i = 0; i < 5; i++)
        {
            int vrem = arr[i]; // сохраняем текущий элемент массива arr[i] в переменной vrem
            arr[i] = arr[9 - i]; // заменяем текущий элемент массива arr[i] значением на позиции arr[9 - i]
            arr[9 - i] = vrem; // помещаем значение, сохраненное в переменной vrem, на позицию в массиве arr[9 - i]
        }

        // Вывод развернутого массива
        printf("\033[1;32mНовый массив (развернутый): \n");
        for(int i = 0; i < 10; i++)
        {
            printf("%5d ", arr[i]); // вывод каждого элемента развернутого массива
        }
        printf("\n\n");

        //цикл для пункта б) - заносим элементы в новый массив
        for(int i = 0; i < 10; i ++)
        {
            arr2[i] = arr[i];
        }


        // Запрос на продолжение
        while(1)    // цикл для проверки на ввод
        {
            printf("\033[1;32mвведите 1 если хотите рестарт любой другой символ - конец программы:   \n"); // вывод сообщения "введите 1 если рестарт иначе конец"
            
            rewind(stdin);  // очистка буфера
            if(scanf("%d", &choice) != 1)    // условие проверки
            {
                printf("\033[1;31mтакой символ не подходит введите число \n"); // вывод сообщения "такой символ не подходит введите число"
            }
            else if(choice < 0 || choice > INT32_MAX) // проверка что число в нужном диапозоне
            {
                printf("\033[1;31mчисло должно быть положительным и до %d\n", INT32_MAX); // вывод сообщения "число должно быть положительным и до 10000"
            }
            else break;
        }
    }
    while(choice == 1);         // условие глобального поиска
    printf("\033[1;32mпрограмма завершенна"); // вывод сообщения "программа завершенна"
    return 0;
}
